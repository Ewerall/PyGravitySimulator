
# PyGravitySimulator

Это интерактивная 2D симуляция гравитационного взаимодействия объектов с возможностью настройки параметров и визуализацией траекторий движения.

##  Структура проекта
```
PyGravitySimulator
├── tests/            # Тесты 
├── resources/        # Ресурсы проекта 
├── main.py           # точка входа
├── objects.py        # класс Object (физические объекты)
├── physics.py        # Физический движок
├── config.py         # Конфигурационные константы (размеры экрана и т.д)
├── ui.py             # Пользовательский интерфейс (поля ввода, сетка)
├── utils.py          # Утилиты и вспомогательные функции (цвета, конвертация)
├── README.md         # This file
```

### Установка и запуск

```bash
pip install pygame
git clone https://github.com/Ewerall/PyGravitySimulator.git
python main.py
```

## Математика

### 1. Гравитационное взаимодействие

Симулятор использует классический закон всемирного тяготения Ньютона с регуляризацией для предотвращения численной нестабильности:

**Основные формулы:**
```
dx = p₂.x - p₁.x

dy = p₂.y - p₁.y

r² = dx² + dy²

r = √(r² + ε²)
```

Где:

-   `dx`, `dy` - компоненты расстояния между объектами
-   `r` - регуляризованное расстояние
-   `ε` - параметр сглаживания (softening), предотвращающий бесконечные силы при малых расстояниях

**Сила гравитационного взаимодействия:**

```
F = G·(m₁·m₂)/(r² + ε²)^(3/2)·(dx, dy)
```

Или в компонентном виде:

```
Fₓ = G·m₁·m₂·dx/(r²·r)

Fᵧ = G·m₁·m₂·dy/(r²·r)
```
Где:

-   `G` - гравитационная постоянная
-   `m₁`, `m₂` - массы объектов
-   `Fₓ`, `Fᵧ` - компоненты силы

##

### 2. Движение частиц

Движение частиц рассчитывается с использованием метода Эйлера:

**Ускорение:**

```
aₓ = Fₓ/m

aᵧ = Fᵧ/m
```

**Скорость:**

```
vₓ(t+dt) = vₓ(t) + aₓ·dt

vᵧ(t+dt) = vᵧ(t) + aᵧ·dt
```

**Позиция:**

```
x(t+dt) = x(t) + vₓ(t+dt)·dt

y(t+dt) = y(t) + vᵧ(t+dt)·dt
```

Где:

-   `dt` - шаг времени
-   `a` - ускорение
-   `v` - скорость
-   `x`, `y` - координаты

##

### 3. Обработка столкновений

**Проверка столкновения:**

```
dx = p₂.x - p₁.x

dy = p₂.y - p₁.y

r² = dx² + dy²

r = √r²

если r < (R₁ + R₂), то столкновение произошло
```

Где:

-   `R₁`, `R₂` - радиусы объектов

##

### 4. Слияние частиц

При столкновении частицы сливаются с сохранением импульса и пересчетом центра масс:

**Суммарная масса:**

```
M = m₁ + m₂
```

**Скорость после слияния (сохранение импульса):**
```
vₓ = (m₁·v₁ₓ + m₂·v₂ₓ)/M

vᵧ = (m₁·v₁ᵧ + m₂·v₂ᵧ)/M
```

**Позиция после слияния (центр масс):**

```
x = (m₁·x₁ + m₂·x₂)/M

y = (m₁·y₁ + m₂·y₂)/M
```

**Радиус результирующего объекта (для 2D):**

```
R = √M
```
Это следует из того, что в 2D масса пропорциональна площади круга: M ∝ πR² ⇒ R ∝ √M